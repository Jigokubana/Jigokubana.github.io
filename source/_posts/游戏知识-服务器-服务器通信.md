---
title: 游戏知识-服务器-服务器通信
tags:
  - null
categories:
  - 游戏知识
  - 服务器
date: 2019-12-22 20:50:02
---

由于自己了解的实在是不足, 所以来腾讯游戏课堂来学习一些架构之类的东西 来完善自己的知识面
[服务器通信](https://gameinstitute.qq.com/course/detail/10096)
<!--more-->
# 概述
作业型-单纯多个client对一个server .. 比如我开始写过的聊天室程序

# CS通信
![浏览器访问过程]()
DNS协议-基于UDP协议

TCP
面向连接的可靠的有时序性的-流式协议
窗口管理
流量控制
数据确认
UDP
无连接不保证可靠性的无法保证时序-报文协议

QQ-CS
网络状况较好-UDP????-好吧还是处理了
网络状况差-TCP
大文件-TCP-TCP适合大文件交互, 因为他保持连接流式协议~

微信-CS
前台运行-TCP长连接
后台运行-TCP短连接
查看文章-HTTP(TCP短连接)

QQ-早期产品, 花最少的前~榨干性能
微信-腾讯后期产品

----------------
字符串
自定义
Protobuf

序列化反序列化.

UDP协议-不要让单个包的数据量超过1K, 否则会由于分片等 导致一个大包一旦一个分片失败就都失败

存在的问题
1. 客户端和服务端数据一直对不上
可能是字节序的问题 - 字节序转换(网络字节数传送)
2. 服务器发送的数据延迟-小包
NAGLE算法-小包并不是立即发送-等存多了在一起发送-可以禁用掉~~
3. 数据较大或者网络波动
发送缓冲区慢了.. 适当加大发送缓冲区

非阻塞IO
O_NONBLOCK
多路复用
select
poll
epoll

# SS通信
![服务器间通信]()
TCP-最常用
UDP-非关键数据-日志服务-内网通信网络状况好可以超过MTU
非SOCKET通信-进程间通信?-管道-信号-共享内存-信息队列-文件..