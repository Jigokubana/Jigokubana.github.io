title: 编程规范
tags:
  - null
categories:
  - CPP
  - CPP重点
date: 2019-10-2518:06:46
---

**第一点**
有时, 把函数的定义同类的实例脱钩是有益的, 甚至是必要的. 这样的函数可以被定义成静态成员, 或是非成员函数. 非成员函数不应依赖于外部变量, 应尽量置于某个命名空间内. 
```c++
// 推荐
namespace myproject {
namespace foo_bar {
void Function1();
void Function2();
}  // namespace foo_bar
}  // namespace myproject

// 不推荐
namespace myproject {
class FooBar {
 public:
  static void Function1();
  static void Function2();
};
}  // namespace myproject
```

**第二点**
局部变量应当声明和初始化同时进行, 推荐使用C++11的花括号

*如果在循环中, 不要将对象的声明放入其中*, 每次进入作用域都会调用构造函数, 每次退出都会调用析构函数

**第三点-类相关**
不要在构造函数中调用虚函数, 也不要在无法报出错误时进行可能失败的初始化.

不要定义隐式类型转换. 

对于转换运算符和单参数构造函数, 请使用 explicit 关键字.
- 单参数构造函数有可能会被无意地用作隐式类型转换.

如果你的类型需要, 就让它们支持拷贝 / 移动. 否则, 就把隐式产生的拷贝和移动函数禁用.
- MyClass(const MyClass&) = delete;
- MyClass& operator=(const MyClass&) = delete;

仅当`只有`数据成员的时候`struct`, `其他一律`使用class

使用组合常常比使用继承更合理
- 所有的继承`必须是public`, 

多重继承(真正需要的时候很少)
- 最多只有一个基类是非抽象类; 其它基类都是以 Interface 为后缀的 纯接口类.

除少数特定环境外, 不要重载运算符. 也不要创建用户定义字面量
- 重载运算符, 容易造成代码混乱, 因为没有统一的重载规范

数据成员都必须是私有的

**第四点-函数相关**

输入参数在先, 后跟输出参数.

编写简短函数

所有按引用传递的参数必须加上 const.

函数重载
- 若要使用函数重载, 则必须能让读者一看调用点就胸有成竹,
而不用花心思猜测调用的重载函数到底是哪一种. 这一规则也适用于构造函数.
- 如果重载函数的目的是为了支持不同数量的同一类型参数, 则优先考虑使用 std::vector 以便使用者可以用 列表初始化 指定参数.

省却参数

函数返回类型后置语法
- `auto foo(int x) -> int` 对于简单的类型, 优点体现不出
- 对于复杂的情况, 例如类域中的类型声明或者以函数参数的形式书写的类型, 写法的不同会造成区别?????.

**杂项**
在 C++11 里，用 constexpr 来定义真正的常量，或实现常量初始化。

**第五点命名-版本最多的地方**

文件命名
- 全部小写包含`_`最好
- C++ 文件要以 .cc 结尾, 头文件以 .h 结尾.

类型名称 - 类, 结构体, 类型定义 (typedef), 枚举, 类型模板参数
- 类型名称的每个单词首字母均大写, 不包含下划线`MyExcitingClass`

变量命名
- 变量 (包括函数参数) 和数据成员名一律小写, 单词之间用下划线连接. 类的成员变量以下划线结尾

常量命名
- 全部大写
- 声明为 constexpr 或 const

函数命名
- 每个单词首字母大写, 没有下划线
- 首字母缩写的单词, 经常对其的第一个字母大写

命名空间命名
- 小写字母命名

枚举命名
- 枚举的命名应当和 常量 或 宏 一致

**第六点-格式**

缩进四个空格

函数定义与声明
- 左圆括号总是和函数名在同一行.(没有标准,,,,,,,,,, emmm 我想我还是换行吧)
- 函数名和左圆括号间永远没有空格.
- 圆括号与参数间没有空格.

