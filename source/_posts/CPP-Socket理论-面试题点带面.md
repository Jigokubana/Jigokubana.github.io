---
title: 面试题点带面
date: 2020-04-11 11:00:20
tags:
categories:
  - CPP
  - Socket理论
---

马上步入四月中旬了, 自己对于socket理论知识知道的还是不多, 于是想了下可以整理下面试题.

单纯整理"正确答案"怎么行. 我相信大部分面试题代表的都是某个知识点 某个知识面 或有他的重要实际应用

部分题目是我自己凭空想出来的, 单独开一篇博客又不是内容足够, 索性放在一起

# 基础api相关
## send发送的时候会自动转换字节序??

作为开篇问题, 我选了这个. 这个问题也算是困扰了一段时间.
网上的解答自然已经有了
https://stackoverflow.com/questions/23106938/do-recv-and-send-convert-the-messages-in-network-order-format-automatically

最先接触到socket字节序转换相信大多是`htons()`
这个说明是将主机字节序转换成网络字节序, 我使用的自然是小端 将小端转换成大端 反转链表就好
而在大端上 头文件自动选择了`htons()`空命令版本

起初我使用send发送全是 类似string的东西 char*保存, 单字节数据自然不会受字节序影响

但是最近学习了moduo后发现了发送数字的实际应用
对于一个 `int32_t`类型的数字需要调用`htobe32()`转换成`大端序`然后`std::copy`到buffer中
接收端读取出四个字节 `std::copy`到`int32_t`中, 需要调用下`be32toh()`转换成`小端序` 这就涉及到了字节序转换

总结下就是单字节数据比如发送一个字符串 是不会收到字节序影响
而如果你直接发送数字比如`int32_t` 就会受到影响