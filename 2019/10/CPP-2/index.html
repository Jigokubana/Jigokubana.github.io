<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,ä¸ªäººåšå®¢,blog" />
  <meta name="description" content="å½¼å²¸é±¼çš„ä¸ªäººåšå®¢" />
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  <link rel="dns-prefetch" href="https://at.alicdn.com">
  
  <link rel="dns-prefetch" href="https://widget.daovoice.io">
  <link rel="dns-prefetch" href="https://widget-static-cdn.daovoice.io">
  <link rel="dns-prefetch" href="https://im.daovoice.io">
  
  
  <link rel="dns-prefetch" href="https://hm.baidu.com/">
  
  
  <link rel="stylesheet" type="text/css" href="/./style/main.css">
	<link rel="shortcut icon" href="/favicon.ico" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>C++è–„ä¹¦æ•´ç†</title>
  
  <script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?378fe7f014810dc29a0702bf27d8b278";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();
  </script>
  
  
    <script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/9c4ca997.js","daovoice");daovoice('init',{app_id: "9c4ca997"});daovoice('update');
  </script>
  
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Lsmgçš„å¤§å­¦ä¹‹è·¯" type="application/atom+xml">
</head>
<body>
  <canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/">Lsmgçš„å¤§å­¦ä¹‹è·¯</a>
  <a class="face-img" href="/">
    <img src="https://lsmg-img.oss-cn-beijing.aliyuncs.com/theme/tx.jpg">
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    C++è–„ä¹¦æ•´ç†
  </h1>
  


    <ul class="article-info">
      <li>
        å‘å¸ƒ
        <time datetime="2019-10-20T11:13:22.000Z" itemprop="datePublished">2019-10-20</time>
      </li>
      <li>
        
    æ›´æ–° <time datetime="2020-12-05T02:26:20.244Z" itemprop="dateUpdated">2020-12-05</time>

      </li>
      <li id="busuanzi_container_page_pv">
        é˜…è¯» <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <h1 id="å®šä¹‰æ–°é‡"><a href="#å®šä¹‰æ–°é‡" class="headerlink" title="å®šä¹‰æ–°é‡"></a>å®šä¹‰æ–°é‡</h1><p>auto è‡ªåŠ¨æ ¹æ®åˆå§‹å€¼çš„ç±»å‹è¿›è¡Œè‡ªåŠ¨ç±»å‹æ¨å¯¼.<br>decltype æ ¹æ®è¡¨è¾¾å¼çš„ç±»å‹å®šä¹‰å¯¹è±¡</p>
<p>å³å€¼å¼•ç”¨, æ“çºµå³å€¼å¯¹è±¡<br><code>std::move()</code>, å¯ä»¥å°†ä¸€ä¸ª</p>
<p><strong>æšä¸¾</strong><br>ä¸é™å®šä½œç”¨åŸŸçš„å®šä¹‰<br>enum color {red, green, blue};<br>é™å®šåœ¨ç±»å‹å†…éƒ¨çš„ä½œç”¨åŸŸ<br>enum class color {red, green, blue};<br><code>color a = color::red</code></p>
<h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><p>æ•°ç»„ä¼ å‚çš„é•¿åº¦å¤„ç†</p>
<ul>
<li>ç›´æ¥ä¼ é€’æ•°ç»„é•¿åº¦</li>
<li>ä½¿ç”¨Cé£æ ¼å­—ç¬¦ä¸²(é»˜è®¤ç»“å°¾æœ‰æ ‡å¿—)</li>
<li>ä½¿ç”¨C++11çš„æ–°å‡½æ•°begin()å’Œend()åŒæ—¶ä¼ é€’é¦–å°¾åœ°å€</li>
</ul>
<p>å‡½æ•°æŒ‡é’ˆ<br><code>bool (*pf)(int, int)</code> å¯ä»¥æŒ‡å‘<br><code>bool max(int a,int b)</code><br>è°ƒç”¨ <code>pf(1, 1)</code>å³å¯<br>å¸¸ç”¨äºå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼</p>
<p><strong>Lambda</strong><br><code>[]() -&gt; return type {statements}</code><br>ä¸­æ‹¬å·ä»£è¡¨lambdaå¼•å¯¼, å…¶ä¸­çš„captureså­å¥åœ¨åŒä¸€ä½œç”¨åŸŸä¸‹lambdaä¸»ä½“æ•è·(è®¿é—®)å“ªäº›å¯¹è±¡<br>ä»¥åŠå¦‚ä½•æ•è·è¿™äº›å¯¹è±¡</p>
<ul>
<li>å¯ä»¥ä¸ºç©º, ä¸ä¼šè®¿é—®å¤–å›´å¯¹è±¡</li>
<li>[=] ä»£è¡¨ç”¨å€¼æ•è·çš„æ–¹å¼</li>
<li>[&amp;] ä»£è¡¨å¼•ç”¨æ•è·</li>
</ul>
<h1 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h1><p><strong>è¾…åŠ©å‡½æ•°</strong><br>å®šä¹‰è¾…åŠ©å‡½æ•°, æœ‰ç‚¹åƒJavaé‡Œé¢çš„é‡å†™toString()å‡½æ•°(æœ€å¸¸è§çš„ä»£è¡¨çš„ä¾‹å­)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;os)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	os &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å‹å…ƒå‡½æ•°</strong><br>ä¸€ä¸ªç±»çš„è¾…åŠ©å‡½æ•°ä»æ¦‚å¿µä¸Šå¯ä»¥çœ‹æˆç±»çš„æ¥å£, è™½ç„¶å’Œç±»çš„å…³ç³»å¾ˆå¯†åˆ‡, ä½†å¹¶ä¸æ˜¯ç±»çš„æˆå‘˜, æ‰€ä»¥ä¸èƒ½ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜<br>C++ ä¸­å¯ä»¥å°†è¯¥ç±»å‡½æ•°å£°æ˜ä¸ºè¯¥ç±»çš„å‹å…ƒ.<br>è¿™æ ·å°±èƒ½è®¿é—®åˆ°ç±»çš„éå…¬æœ‰æˆå‘˜.<br>åœ¨å‡½æ•°çš„å‰é¢åŠ ä¸Š<code>friend</code>å…³é”®å­—<br><strong>å‹å…ƒç±»</strong><br>å¦‚æœAæƒ³è®¿é—®Bçš„ç§æœ‰æˆå‘˜, å¯ä»¥åœ¨Bå†…å£°æ˜<code>friend class A</code>, è¿™æ ·å°±å¯ä»¥åœ¨Bå†…è®¿é—®Açš„ç§æœ‰æˆå‘˜<br><em>å‹å…ƒå…³ç³»æ˜¯å•å‘çš„, ä¸å…·æœ‰äº¤æ¢æ€§, åŒæ—¶ä¹Ÿä¸å…·æœ‰ä¼ é€’æ€§</em></p>
<p><strong>æ„é€ å‡½æ•°</strong><br>é»˜è®¤æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°, æˆ–è€…æ‰€æœ‰çš„å‚æ•°éƒ½å…·æœ‰é»˜è®¤å€¼<br>C++11å…è®¸åœ¨æ˜¾ç¤ºå®šä¹‰æ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°<br>éœ€è¦åœ¨é»˜è®¤æ„é€ å‡½æ•°åé¢åŠ ä¸Š<code>= default</code><br><em>ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºç±»å¯¹è±¡æ—¶, åˆ‡å¿Œåœ¨å¯¹è±¡ååIä½¿ç”¨åœ†æ‹¬å·, æˆäº†ä¸€ä¸ªå‡½æ•°å£°æ˜</em></p>
<p><strong>åˆå§‹å€¼åˆ—è¡¨</strong><br>T(int a, int b):a_(a), b_(b){}<br>å¼•ç”¨å’Œconstä¿®é¥°çš„å¿…é¡»ç”¨åˆå§‹å€¼åˆ—è¡¨åˆå§‹åŒ–, åˆå§‹çš„é¡ºåºå–å†³äºæ•°æ®æˆå‘˜åœ¨ç±»å†…çš„å®šä¹‰é¡ºåº,<br>è€Œéåˆå§‹å€¼åˆ—è¡¨çš„é¡ºåº</p>
<p><strong>ç®€åŒ–æ„é€ å‡½æ•°</strong><br>å®é™…å°†è‡ªå·±çš„å¸¦å‚æ„é€ å‡½æ•°, ç»™å®šé»˜è®¤å€¼, è¿™æ ·å°±å®ç°äº†é»˜è®¤æ„é€ å‡½æ•°å’Œå¸¦å‚æ„é€ å‡½æ•°çš„åˆå¹¶</p>
<p><strong>å¤åˆ¶æ„é€ å‡½æ•°</strong><br>å‚æ•°ä¸ºè¯¥ç±»çš„å¼•ç”¨</p>
<p><strong>å§”æ‰˜æ„é€ å‡½æ•°</strong><br>å‡å°‘æ„é€ å‡½æ•°ä»£ç é‡<br>å®é™…å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°åé¢åŠ ä¸Š<code>:</code>è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°, åŒæ—¶ä¼ å…¥å‚æ•°</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> bar1_;</span><br><span class="line">	<span class="keyword">int</span> bar2_;</span><br><span class="line">	A(<span class="keyword">int</span> b1):A(b1, <span class="number">2</span>)&#123;&#125;</span><br><span class="line">	A(<span class="keyword">int</span> b1, <span class="keyword">int</span> b2):bar1_(b1), bar2_(b2)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿ç®—ç¬¦é‡è½½</strong><br>T operator /(A, B);<br>åŒç›®è¿ç®—ç¬¦ä¸¤ä¸ªå‚æ•°<br>å•ç›®è¿ç®—ç¬¦ä¸€ä¸ªå‚æ•°<br>å¯¹äºäºŒå…ƒè¿ç®—ç¬¦, å·¦ä¾§è¿ç®—å¯¹è±¡ä¼ é€’ç»™ç¬¬ä¸€ä¸ªå‚æ•°, å³ä¾§è¿ç®—å¯¹è±¡ä¼ é€’ç»™ç¬¬äºŒä¸ªå‚æ•°.</p>
<p>è¿ç®—ç¬¦é‡è½½çš„å£°æ˜å’Œå®šä¹‰çš„åˆ†ç¦»<br>æ”¾åœ¨ç±»æˆå‘˜ä¸­çš„è¿ç®—ç¬¦é‡è½½, éœ€è¦ç®—å…¥é»˜è®¤çš„thisæŒ‡é’ˆå‚æ•°</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Test(<span class="keyword">int</span> a, <span class="keyword">int</span> b);</span><br><span class="line">    Test&amp; <span class="keyword">operator</span>+(<span class="keyword">const</span> Test&amp; right);</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">PrintAB</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> a_;</span><br><span class="line">	<span class="keyword">int</span> b_;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// test.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"test.h"</span></span></span><br><span class="line">Test::Test(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span><br><span class="line">&#123;</span><br><span class="line">    a_ = a;</span><br><span class="line">    b_ = b;</span><br><span class="line">&#125;</span><br><span class="line">Test&amp; Test::<span class="keyword">operator</span>+(<span class="keyword">const</span> Test&amp; right)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">Test <span class="title">test</span><span class="params">(<span class="keyword">this</span>-&gt;a_ + right.a_, <span class="keyword">this</span>-&gt;b_ + right.b_)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> test;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test::PrintAB</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, a_, b_);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Test <span class="title">test1</span><span class="params">(<span class="number">1</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">Test <span class="title">test2</span><span class="params">(<span class="number">2</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">    Test test = test1 + test2;</span><br><span class="line">    test.PrintAB();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ++ -- </span></span><br><span class="line">Test&amp; <span class="keyword">operator</span>++(); <span class="comment">// å‰ç½®ç‰ˆæœ¬</span></span><br><span class="line">Test <span class="keyword">operator</span>++(<span class="keyword">int</span>); <span class="comment">// åç½®ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure>
<p><strong>ç±»æˆå‘˜æŒ‡é’ˆ</strong><br><em>æ•°æ®æˆå‘˜æŒ‡é’ˆ</em> (privateä¸èƒ½é€šè¿‡æŒ‡é’ˆè®¿é—®)<br>å…¶å€¼æ˜¯æ•°æ®æˆå‘˜æ‰€åœ¨åœ°å€ç›¸å¯¹äºå¯¹è±¡èµ·å§‹åœ°å€çš„åç§»å€¼</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A T::*p1 = &amp;T::x</span><br><span class="line"><span class="keyword">int</span> A::*p1 = &amp;A::value</span><br><span class="line">A a;</span><br><span class="line"><span class="comment">// ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">a.*p = ......................;</span><br></pre></td></tr></table></figure>
<p>p1æŒ‡å‘Tç±»ä¸­çš„ Aç±»å‹çš„xæ•°æ®æˆå‘˜<br><code>A T::</code>å¯ä»¥ç”¨<code>auto</code></p>
<p><em>æˆå‘˜å‡½æ•°æŒ‡é’ˆ</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> (A::*pf)();</span><br><span class="line">pf = &amp;A::GetValue;</span><br><span class="line"><span class="comment">// å½“ç„¶å¯ä»¥ä½¿ç”¨auto æ¥ç®€åŒ–</span></span><br><span class="line"><span class="keyword">auto</span> pf2 = &amp;A::GetValue;</span><br><span class="line"><span class="comment">// ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">(a.*pf)();</span><br></pre></td></tr></table></figure>

<hr>
<p>ç»Ÿä¸€åˆå§‹åŒ–<br><code>X x1 = {0} å’Œ X x2 {0}</code> è¿™ä¸¤ç§æ˜¯ä¸åŒçš„å®ç°!!, å¤§å¤šæ•°æƒ…å†µä¸‹è¿™ä¸¤ä¸ªæ˜¯ç›¸é€šçš„, ç„¶è€Œå½“<br><code>explicitæ„é€ å‡½æ•°</code>å­˜åœ¨çš„æ—¶å€™<code>å‰è€…çš„åˆå§‹åŒ–æ˜¯é”™è¯¯çš„</code></p>
<p><code>int x{0} int x= 0 int x(0)</code> æœ€åä¸€ä¸ªæ˜¯é”™è¯¯çš„å¯èƒ½ä¼šå’Œå‡½æ•°å£°æ˜å†²çª</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">typedef</span> <span class="keyword">int</span> x;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">z</span><span class="params">(x)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦å¤–è¿˜å­˜åœ¨ä¸€ä¸ª</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::atomic&lt;<span class="keyword">int</span>&gt; a1&#123;<span class="number">0</span>&#125;; <span class="comment">// OK</span></span><br><span class="line"><span class="function"><span class="built_in">std</span>::atomic&lt;<span class="keyword">int</span>&gt; <span class="title">a2</span><span class="params">(<span class="number">0</span>)</span></span>; <span class="comment">// OK</span></span><br><span class="line"><span class="built_in">std</span>::atomic&lt;<span class="keyword">int</span>&gt; a3 = <span class="number">0</span>; <span class="comment">// Error</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯copy-initializationå¼•èµ·çš„<br>è¿™ä¸ªcopy-initializationå‘ç”Ÿåœ¨<code>T x = a</code>çš„å£°æ˜, ä¸‹é¢æˆ‘æŠŠåŸåšå®¢çš„éƒ¨åˆ†é‡è¦è‹±æ–‡æ›¿æ¢æˆä¸­æ–‡æˆ–ä»£ç æè¿°<br><code>std::atomic&lt;int&gt; a3 = 0</code> ä»<code>intç±»å‹</code>èµ‹å€¼åˆ°<code>å¯èƒ½æ˜¯ cv-qualified</code>çš„<code>class type</code><br><a href="https://stackoverflow.com/questions/27527642/what-does-cv-qualified-mean" target="_blank" rel="noopener">cv-qualified</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ***cv-qualified***</span></span><br><span class="line"><span class="comment">// non cv_qualified</span></span><br><span class="line"><span class="keyword">int</span> first; </span><br><span class="line"><span class="keyword">char</span> *second; </span><br><span class="line"></span><br><span class="line"><span class="comment">// cv-qualified </span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> third; </span><br><span class="line"><span class="keyword">volatile</span> <span class="keyword">char</span> * fourth;</span><br></pre></td></tr></table></figure>
<p><code>std::atomic&lt;int&gt; a3 = 0</code> æ»¡è¶³äº†è¿™ä¸ªæ¡ä»¶å±äº<code>copy-initialization</code><br><a href="https://www.quora.com/What-is-the-difference-between-copy-initialization-and-direct-initialization-of-objects-in-c++" target="_blank" rel="noopener">copy-initialization</a><br><a href="https://blog.csdn.net/ljianhui/article/details/9245661" target="_blank" rel="noopener">ç›´æ¥åˆå§‹åŒ–å’Œå¤åˆ¶åˆå§‹åŒ–çš„åŒºåˆ«</a><br>ç›´æ¥åˆå§‹åŒ–ä¼šç›´æ¥ç”¨å‚æ•°ç”Ÿæˆå¯¹è±¡, è€Œå¤åˆ¶åˆå§‹åŒ–ä¼š<code>ç”¨å‚æ•°ç”Ÿæˆä¸´æ—¶å¯¹è±¡, ç„¶åå°†è¿™ä¸ªå¯¹è±¡å¤åˆ¶åˆ°æ­£è¦åˆ›å»ºçš„å¯¹è±¡</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">        A () &#123; &#125; <span class="comment">//ç›´æ¥åˆå§‹åŒ–ä¼šè°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line">        A (<span class="keyword">const</span> A&amp; a) &#123; &#125; <span class="comment">//å¤åˆ¶åˆå§‹åŒ–ä¼šè°ƒç”¨è¿™ä¸ª</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥éœ€è¦é€šè¿‡<code>std::atomic&lt;int&gt;(int)</code>æŠŠ0è½¬æ¢æˆæˆä¸€ä¸ªçº¯å³å€¼(prvalue)çš„ä¸´æ—¶å¯¹è±¡<br><a href="https://zh.cppreference.com/w/cpp/language/value_category" target="_blank" rel="noopener">çº¯å³å€¼</a><br><a href="https://www.cnblogs.com/zpcdbky/p/5275959.html" target="_blank" rel="noopener">çº¯å³å€¼</a><br>ç„¶åå†å°†è¿™ä¸ªä¸´æ—¶å¯¹è±¡ç”¨ç›´æ¥åˆå§‹åŒ–(è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°), ç„¶è€Œ<code>std::atomic&lt;int&gt;</code>æŠŠæ‹·è´<br>æ„é€ å‡½æ•°ç»™ç¦ç”¨äº†, å°±ä¼šå‡ºé”™<br><code>std::atomic&lt;int&gt; a3 {0}</code>è¿™ä¸ªä¼šç›´æ¥è°ƒç”¨æ¥æ”¶intçš„æ„é€ å‡½æ•°</p>
<p>å›åˆ°<code>X x1 = {0}</code>è¿™é‡Œ, è¿™ä¸ªè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå¤åˆ¶æ„é€ , ç”¨ä¸€ä¸ªbraced-init-list(æŒ‡çš„{0}).<br>è¿™é‡Œæœ‰ä¸¤ä¸ªé˜¶æ®µ<br>é¦–å…ˆæ˜¯ä¼šæŠŠå•ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°æ±‡æ€»èµ·æ¥(å¾—åˆ°A-list)ä¾›é€‰æ‹©, å¦‚æœå…¶ä¸­æ²¡æœ‰åˆé€‚çš„æ„é€ å‡½æ•°, å†å°†å€™é€‰åˆ—è¡¨<br>è½¬æ¢ä¸ºæ‰€æœ‰æ„é€ å‡½æ•°</p>
<p>å¦‚æœå¦‚æœA-listæ²¡æœ‰æ„é€ å‡½æ•°, å¹¶ä¸”class Tå­˜åœ¨é»˜è®¤æ„é€ å‡½æ•°, ç¬¬ä¸€é˜¶æ®µå°±ä¼šè¢«å¿½ç•¥<br>å¦‚æœåœ¨ä¸€ä¸ªä½¿ç”¨<code>{}</code>çš„åˆå§‹åŒ–, å¹¶ä¸”é€‰æ‹©åˆ°äº†<code>explicit æ„é€ å‡½æ•°å¤´ä¸Š</code>å°±ä¼šæŠ¥é”™</p>
<p><code>explicit</code>å¯ä»¥é˜²æ­¢åœ¨è°ƒç”¨æŸä¸ªæˆå‘˜å‡½æ•°çš„æ—¶å€™, å®å‚ç±»å‹(é€šè¿‡æ„é€ å‡½æ•°ä¹‹ä¸€)è‡ªåŠ¨è½¬æ¢æˆç›¸åº”å‚æ•°,<br>ä½†æ­¤æ—¶è¿™ä¸ªå‡½æ•°éœ€è¦å…¶ä»–çš„æˆå‘˜å˜é‡å‚ä¸åˆ°å‡½æ•°è¿è¡Œ, æ°å·§è¿™æ—¶æ‰€éœ€è¦çš„å…¶ä»–æˆå‘˜å˜é‡æ²¡æœ‰å¾—åˆ°åˆé€‚çš„åˆå§‹åŒ–, å°±ä¼šå‘ç”Ÿé”™è¯¯(æ²¡æœ‰å¾—åˆ°åˆé€‚åˆå§‹åŒ–çš„åŸå› å°±æ˜¯, è‡ªåŠ¨è°ƒç”¨äº†ä¸åˆé€‚çš„æ„é€ å‡½æ•°ç”Ÿæˆäº†è¿™ä¸ªå‡½æ•°æ‰€éœ€è¦çš„å‚æ•°(ä¸€èˆ¬æ˜¯å¯¹è±¡))</p>
<p>@2019å¹´10æœˆ26æ—¥21:25:58@ç®—æ˜¯ç¬¬ä¸€æ¬¡è§£å†³ä¸€ä¸ªç¯ç¯ç›¸æ‰£çš„é—®é¢˜, ç²¾åŠ›æœ‰ç‚¹ä¸è¶³äº†<br><a href="https://zhuanlan.zhihu.com/p/21102748" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/21102748</a> åç»­ä¼šç»§ç»­è¿›è¡Œç†è§£<br><a href="https://blog.csdn.net/spaceyqy/article/details/22730939" target="_blank" rel="noopener">è¿™é‡Œè¿˜å‘ç°ä¸€ä¸ª</a></p>
<h1 id="æ¨¡æ¿-æ³›å‹-åŠ¨æ€å†…å­˜-æ•°æ®ç»“æ„"><a href="#æ¨¡æ¿-æ³›å‹-åŠ¨æ€å†…å­˜-æ•°æ®ç»“æ„" class="headerlink" title="æ¨¡æ¿, æ³›å‹ åŠ¨æ€å†…å­˜, æ•°æ®ç»“æ„"></a>æ¨¡æ¿, æ³›å‹ åŠ¨æ€å†…å­˜, æ•°æ®ç»“æ„</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">const</span> T&amp; <span class="title">GetMax</span><span class="params">(<span class="keyword">const</span> T&amp; a, <span class="keyword">const</span> T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; GetMax(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; GetMax&lt;<span class="keyword">int</span>&gt;(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// æ˜¾ç¤ºæŒ‡å®šæ¨¡æ¿ç±»å‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://lsmg-img.oss-cn-beijing.aliyuncs.com/CPPPrimer/C%2B%2B%E5%86%85%E5%AD%98.png" alt=""><br>C++å †çš„å†…å­˜éœ€è¦æ‰‹åŠ¨newå’Œdelete, å¦‚æœä¸€ä¸ªå¯¹è±¡newå‡ºæ¥æ²¡æœ‰åœ¨èƒ½è¢«é‡Šæ”¾çš„æ—¶å€™é‡Šæ”¾å°±ä¼šé€ æˆâ€“<strong>å†…å­˜æ³„æ¼</strong>(éœ€è¦åŠæ—¶deleteä¸éœ€è¦çš„å¯¹è±¡)<br>ä¸€ä¸ªæŒ‡å‘åŠ¨æ€å†…å­˜çš„æŒ‡é’ˆ, åœ¨åŠ¨æ€å†…å­˜è¢«é‡Šæ”¾å, æŒ‡é’ˆä¾ç„¶æŒ‡å‘åŸæ¥çš„åœ°å€â€“<strong>ç©ºæ‚¬æŒ‡é’ˆ</strong>(é‡Šæ”¾å†…å­˜åå°†ç›¸åº”çš„æŒ‡é’ˆè®¾ç½®ä¸ºnullptr)</p>
<p><img src="https://lsmg-img.oss-cn-beijing.aliyuncs.com/CPPPrimer/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88.png" alt=""></p>

      </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>å–œæ¬¢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          

        </div>
      </div>
    </div>
   </div>
</main>
<div class="footer">
  <div class="info">
    <p>
    <a href="https://hexo.io" target="_blank" rel="noopener"> Hexo </a> å¼ºåŠ›é©±åŠ¨ |
      <a href="https://github.com/Youthink/hexo-themes-yearn" target="_blank" rel="noopener"> Yearn </a>
      ä¸»é¢˜
    </p>
    <p>&copy;2018-2020 å½¼å²¸é±¼çš„åšå®¢</p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = '\næ¬¢è¿è®¿é—® https://hufangyun.com ï¼Œå›´è§‚å°çŒ¿å¤§åœ£çš„åšå®¢(ã¥ï½¡â—•â€¿â€¿â—•ï½¡)ã¥ï¼\n,\næœ¬åšå®¢ä½¿ç”¨ %cHexo%c æ­å»ºï¼Œåšå®¢ä¸»é¢˜ä¸ºå°çŒ¿å¤§åœ£å¼€å‘çš„ %chexo-themes-yearn%c ~~~ ğŸ‰ğŸ‰ğŸ‰ \n\næºç  https://github.com/Youthink/hexo-themes-yearn \n\nå¦‚æœå–œæ¬¢å¯ä»¥ star æ”¯æŒä¸€ä¸‹ â¤ï¸~\n,\næ‰«æä¸‹é¢çš„äºŒç»´ç ï¼Œåœ¨æ‰‹æœºä¸ŠæŸ¥çœ‹åšå®¢ï¼\n,https://static.hufangyun.com/blog-url-qrcode-180-180.png,\n æƒ³çŸ¥é“è¿™ä¸ªæ•ˆæœå¦‚ä½•å®ç°çš„ï¼Ÿåšå®¢å†…æœç´¢ console å½©è›‹ ğŸš€ ï¼\n'.split(',');
  var canConsole = false;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/./js/main.js"></script>

  <script src="//at.alicdn.com/t/font_159214_mvtxvg9me9.js"></script>
</body>
</html>
